<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html><head>

		<script type='application/javascript' src="/static/js/jquery.min.js"></script>
		<script type='application/javascript' src="/static/js/jquery.md5.js"></script>
		
		<script type='application/javascript' src="/static/js/Utils.js"></script>
		<script type='application/javascript' src="/static/js/FlowCore.js"></script>
      	
      	<script type="application/javascript">
      		var flowConnector = undefined;
      		
      		openHandler = function(msgObj){
      		    window.open(msgObj.get_body(),'_newtab');
      		}
      
	        $(document).ready(function() {	
				
				$('#connect').click(function() {					
					flowConnector = new Flow(String($('#deviceId').val()), String($('#serverAddr').val()));
					flowConnector.addHandler("OPEN", openHandler);
					
					flowConnector.connect(function(){
						alert("connected");
					});
				});
					

	
		        $('#send').click(function() {
		        	console.log($('#message').val());
		            hmm.ws.send($('#message').val());
		            $('#message').val("");
		            return false;
		    	});
	        });
    	</script>
    </head>
	<body>
		<textarea id="chat" cols="35" rows="10"></textarea>
	    </br>
	    <label for="message">Send Data: </label><input type="text" id="message">
	    <input id="send" type="submit" value="Send">
	    </br>
	   	<label for="deviceId">Device ID: </label><input type="text" id="deviceId" value="1">
	   	</br>
	   	<label for="serverAddr">Server Address: </label><input type="text" id="serverAddr" value="18.111.57.208:9000">
	   	<input id="connect" type="submit" value="Connect">
	    </br>
	</body>
</html>